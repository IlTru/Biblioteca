#include <iostream>
#include <iomanip>
#include <string.h>

using namespace std;

#define MAX 50

/**
 * Citeste de la tastatura un sir de 'max' caractere si il pune in sir.
 * Inainte elimina din buffer-ul tastaturii orice caracter.
 * Testat pe CodeBlocks/Dev++
 */
void citesteSirCuSpatii(char *sir, int max) {
  if(cin.fail())
    cin.clear();
  cin.sync();
  cin.getline(sir, max,'\n');
  cin.clear();
  cin.sync();
}

class Carte {
private:
  char titlu[MAX];
  char autor[MAX];
  int anAparitie;
public:
  Carte(char *titlu="", char *autor="", int anAparitie=0);
  ~Carte();
  void afisare();
  void citire();
};

Carte::Carte(char *titlu, char *autor, int anAparitie) {
  strncpy(this->titlu, titlu, sizeof(this->titlu));
  strncpy(this->autor, autor, sizeof(this->autor));
  this -> anAparitie = anAparitie;
  cout<<"Apel constructor"<<endl;
}

Carte::~Carte(){
  cout<<"Apel destructor"<<endl;
}

void Carte::afisare() {
  cout<<"----------------------"<<endl;
  cout<<"Titlu:\t"<<titlu<<endl;
  cout<<"Autor:\t"<<autor<<endl;
  cout<<"An:\t"<<anAparitie<<endl;
  cout<<"----------------------"<<endl;
}

void Carte::citire() {
  cout<<"Titlu:\t";
  citesteSirCuSpatii(titlu,sizeof(titlu));
  cout<<"Autor:\t";
  citesteSirCuSpatii(autor,sizeof(autor));
  cout<<"An:\t";
  cin>>anAparitie;
}

class Biblioteca
{
    private:
    int nrCarti;
    Carte *carti;

    public:
    Biblioteca(int n);
    Biblioteca(const Biblioteca &b);
    ~Biblioteca();

    void citire();
    void afisare();

};

 Biblioteca::Biblioteca(int n)
 {
     this->nrCarti=n;
     this->carti = new Carte[n];
 }

 Biblioteca::Biblioteca(const Biblioteca &b)
 {
    this->nrCarti=b.nrCarti;
    this->carti = new Carte[nrCarti];
    for(int i=0;i<nrCarti;i++)
    {
        carti[i]=b.carti[i];
    }
 }

 Biblioteca::~Biblioteca()
 {
     delete []carti;
 }

void Biblioteca::citire()
 {
     for(int i=0;i<nrCarti;i++){
    carti[i].citire();
  }
 }

void Biblioteca::afisare()
 {
     for(int i=0;i<nrCarti;i++){
    carti[i].afisare();}
 }

int main() {
  int n=3;
  Biblioteca b(n);
  b.citire();
  b.afisare();
}
